---
import Background from "../components/Background.astro";
import Gallery from "../components/Gallery.svelte";
import Layout from "../layouts/Layout.astro";
import { getWorks } from "../scripts/contentful";
const works = await getWorks();
---

<Layout title="Escentier">
  <main
    class="mb-4 flex min-h-screen items-end justify-end text-7xl font-bold text-white"
  >
    <h2 id="essence">Uncover the essence,</h2>
  </main>
  <Background works={works} />
  <Gallery client:only />
</Layout>

<script>
  const h2 = document.querySelector("h2#essence") as HTMLElement;
  h2.style.opacity = "0";
  const vh = window.innerHeight;

  window.addEventListener("scroll", () => {
    let scrollY = window.scrollY;
    let opacity;

    if (scrollY <= vh / 2) {
      opacity = scrollY / (vh / 2);
    } else {
      opacity = 1 - (scrollY - vh / 2) / (vh / 2);
    }

    h2.style.opacity = opacity.toString();
  });
</script>
